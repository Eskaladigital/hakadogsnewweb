#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Verificando compilaciÃ³n antes del commit..."
echo "â³ Ejecutando: npm run build"
echo ""

# Ejecutar build y capturar el cÃ³digo de salida
npm run build

# Si el build falla, bloquear el commit
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ ERROR: La compilaciÃ³n fallÃ³"
  echo "â›” COMMIT BLOQUEADO"
  echo ""
  echo "ğŸ“‹ Por favor:"
  echo "   1. Revisa los errores arriba"
  echo "   2. Corrige los errores en el cÃ³digo"
  echo "   3. Ejecuta 'npm run build' manualmente"
  echo "   4. Cuando compile sin errores, intenta el commit de nuevo"
  echo ""
  echo "ğŸ’¡ Recuerda: Esta regla ahorra deploys fallidos en Vercel"
  exit 1
fi

echo ""
echo "âœ… CompilaciÃ³n exitosa"
echo "âœ… Commit permitido"
echo ""
