# ğŸ“° BLOG PROFESIONAL - HAKADOGS

**VersiÃ³n**: 2.1.0  
**Fecha**: Enero 2026  
**Estado**: âœ… **COMPLETADO Y DESPLEGADO**

---

## ğŸ¯ RESUMEN

Sistema completo de blog profesional con diseÃ±o tipo marketing digital, gestiÃ³n avanzada de contenido y Media Library integrada.

---

## ğŸ¨ DISEÃ‘O FRONTEND

### Layout Profesional de 2 Columnas

#### **PÃ¡gina Principal** (`/blog`)

**Hero Compacto:**
- TÃ­tulo: "Blog de EducaciÃ³n Canina"
- SubtÃ­tulo descriptivo
- Sin ocupar mucho espacio vertical

**ArtÃ­culo Destacado Principal:**
- Card grande con diseÃ±o 2 columnas (imagen izquierda, contenido derecha)
- Badge "ArtÃ­culo Destacado" con estrella dorada
- Imagen destacada con hover zoom effect
- TÃ­tulo grande (H2)
- Excerpt de 3 lÃ­neas
- Metadata completa: fecha, tiempo lectura, vistas
- BotÃ³n "Leer artÃ­culo completo" con flecha animada

**Layout 2 Columnas:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     HERO COMPACTO                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              ARTÃCULO DESTACADO PRINCIPAL                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   COLUMNA PRINCIPAL (66%)      â”‚   SIDEBAR (33%) - STICKY    â”‚
â”‚                                â”‚                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  ArtÃ­culo 1             â”‚  â”‚  â”‚ ğŸ” BÃšSQUEDA          â”‚  â”‚
â”‚   â”‚  [Imagen | Contenido]   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                             â”‚
â”‚                                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ ğŸ·ï¸ CATEGORÃAS       â”‚  â”‚
â”‚   â”‚  ArtÃ­culo 2             â”‚  â”‚  â”‚  Todas (12)          â”‚  â”‚
â”‚   â”‚  [Imagen | Contenido]   â”‚  â”‚  â”‚  EducaciÃ³n (5)       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  Salud (3)           â”‚  â”‚
â”‚                                â”‚  â”‚  NutriciÃ³n (2)       â”‚  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  Comportamiento (2)  â”‚  â”‚
â”‚   â”‚  ArtÃ­culo 3             â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   â”‚  [Imagen | Contenido]   â”‚  â”‚                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                                â”‚  â”‚ ğŸ“ˆ MÃS POPULARES     â”‚  â”‚
â”‚   ... mÃ¡s artÃ­culos ...        â”‚  â”‚  1. ArtÃ­culo X       â”‚  â”‚
â”‚                                â”‚  â”‚  2. ArtÃ­culo Y       â”‚  â”‚
â”‚                                â”‚  â”‚  3. ArtÃ­culo Z       â”‚  â”‚
â”‚                                â”‚  â”‚  4. ArtÃ­culo W       â”‚  â”‚
â”‚                                â”‚  â”‚  5. ArtÃ­culo V       â”‚  â”‚
â”‚                                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                â”‚                             â”‚
â”‚                                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                                â”‚  â”‚ ğŸ’š CTA CURSOS        â”‚  â”‚
â”‚                                â”‚  â”‚  "Â¿Quieres aprender  â”‚  â”‚
â”‚                                â”‚  â”‚   mÃ¡s?"              â”‚  â”‚
â”‚                                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Columna Principal (Izquierda - 66%)**

**Cards de ArtÃ­culos:**
- Formato horizontal: Imagen (256px ancho) + Contenido (derecha)
- Imagen con aspect ratio mantenido y overflow hidden
- Hover: zoom de imagen (scale 1.05) + sombra mÃ¡s pronunciada
- CategorÃ­a: badge de color con texto blanco
- TÃ­tulo: H3 en negro, hover cambia a color forest
- Excerpt: 2-3 lÃ­neas con line-clamp
- Metadata: fecha + tiempo lectura + vistas (iconos lucide)
- Border gris claro (border-gray-100)
- Rounded corners (rounded-xl)

**Responsive:**
- Desktop: imagen izquierda
- MÃ³vil: imagen arriba (vertical stack)

### **Sidebar Derecha (33% - STICKY)**

El sidebar tiene `sticky top-24` para quedarse visible al hacer scroll.

#### **1. Widget BÃºsqueda** ğŸ”
```tsx
- Input grande con placeholder "Â¿QuÃ© buscas?"
- BotÃ³n con gradiente forest-sage
- Icono de bÃºsqueda
- Loading spinner cuando busca
- BotÃ³n "Limpiar bÃºsqueda" (cuando hay filtros activos)
```

#### **2. Widget CategorÃ­as** ğŸ·ï¸
```tsx
- TÃ­tulo "CategorÃ­as" con icono Tag
- BotÃ³n "Todas las categorÃ­as" con contador total
- Lista de categorÃ­as:
  * Fondo gris claro (hover: mÃ¡s oscuro)
  * Seleccionada: color de la categorÃ­a + texto blanco
  * Contador de posts a la derecha (badge redondeado)
  * Colores personalizados por categorÃ­a
```

#### **3. Widget ArtÃ­culos Populares** ğŸ“ˆ
```tsx
- TÃ­tulo "MÃ¡s Populares" con icono TrendingUp
- Top 5 artÃ­culos ordenados por vistas:
  * NÃºmero (1-5) en cÃ­rculo verde
  * TÃ­tulo (line-clamp-2)
  * Contador de vistas con icono Eye
  * Hover: fondo gris claro
```

#### **4. Widget CTA** ğŸ’š
```tsx
- Fondo gradiente forest-sage
- TÃ­tulo "Â¿Quieres aprender mÃ¡s?"
- DescripciÃ³n breve
- BotÃ³n blanco "Ver Cursos"
- Sombra pronunciada (shadow-lg)
```

---

## ğŸ”§ GESTIÃ“N DE CONTENIDO (Panel Admin)

### Sistema de GestiÃ³n Completo

#### **Arquitectura de PÃ¡ginas Dedicadas** (estilo WordPress/Joomla)

**Antes** âŒ:
```
/administrator/blog
  â””â”€ Modal para crear/editar (limitado, incÃ³modo)
```

**Ahora** âœ…:
```
/administrator/blog
  â”œâ”€ pÃ¡gina principal (tabla de artÃ­culos)
  â”œâ”€ /nuevo (pÃ¡gina completa para crear)
  â””â”€ /editar/[postId] (pÃ¡gina completa para editar)
```

### **PÃ¡gina Principal** (`/administrator/blog`)

**Tabla de ArtÃ­culos:**
- Columnas: TÃ­tulo, CategorÃ­a, Estado, Fecha, Vistas
- BÃºsqueda por tÃ­tulo
- Filtros por:
  * Estado (Todos, Publicado, Borrador)
  * CategorÃ­a
- Acciones por fila:
  * BotÃ³n "Editar" â†’ Link a `/administrator/blog/editar/[postId]`
  * BotÃ³n "Ver" (solo si publicado)
  * BotÃ³n "Eliminar"
- BotÃ³n destacado "Crear Nuevo ArtÃ­culo" â†’ Link a `/administrator/blog/nuevo`
- PaginaciÃ³n
- EstadÃ­sticas: total artÃ­culos, publicados, borradores

### **Crear Nuevo ArtÃ­culo** (`/administrator/blog/nuevo`)

**Formulario Completo:**

```tsx
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CREAR NUEVO ARTÃCULO                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                            â”‚
â”‚  ğŸ“ TÃ­tulo *                               â”‚
â”‚  [input text]                              â”‚
â”‚                                            â”‚
â”‚  ğŸ”— Slug (generado automÃ¡ticamente)        â”‚
â”‚  [input text - readonly al escribir tÃ­tulo]â”‚
â”‚                                            â”‚
â”‚  ğŸ·ï¸ CategorÃ­a *                            â”‚
â”‚  [select con colores]                      â”‚
â”‚                                            â”‚
â”‚  âœï¸ Excerpt / DescripciÃ³n Corta *          â”‚
â”‚  [textarea 2-3 lÃ­neas]                     â”‚
â”‚                                            â”‚
â”‚  ğŸ–¼ï¸ Imagen Destacada                       â”‚
â”‚  [BotÃ³n "Seleccionar desde GalerÃ­a"]      â”‚
â”‚  [Preview de imagen seleccionada]         â”‚
â”‚                                            â”‚
â”‚  ğŸ“„ Contenido *                            â”‚
â”‚  [Editor TinyMCE - pantalla completa]     â”‚
â”‚                                            â”‚
â”‚  ğŸ“Š ConfiguraciÃ³n SEO                      â”‚
â”‚  [input] Meta Description                 â”‚
â”‚  [input] Meta Keywords                     â”‚
â”‚                                            â”‚
â”‚  âš™ï¸ Opciones                               â”‚
â”‚  [checkbox] Destacar artÃ­culo              â”‚
â”‚  [checkbox] Publicar inmediatamente        â”‚
â”‚  [input number] Tiempo lectura (min)       â”‚
â”‚                                            â”‚
â”‚  [BotÃ³n "Guardar Borrador"]               â”‚
â”‚  [BotÃ³n "Publicar ArtÃ­culo"]              â”‚
â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**CaracterÃ­sticas:**
- Editor TinyMCE con todas las opciones
- **Media Library integrada** (modal con galerÃ­a de imÃ¡genes)
- GeneraciÃ³n automÃ¡tica de slug desde tÃ­tulo
- Preview en tiempo real del excerpt
- ValidaciÃ³n de campos requeridos
- Toast notifications en guardado
- Auto-save cada 2 minutos (opcional)

### **Editar ArtÃ­culo** (`/administrator/blog/editar/[postId]`)

**IdÃ©ntico a crear, pero:**
- TÃ­tulo: "Editar ArtÃ­culo"
- Campos pre-rellenados con datos existentes
- BotÃ³n adicional "Ver ArtÃ­culo Publicado" (si estÃ¡ publicado)
- Historial de cambios (opcional, futuro)
- Ãšltima modificaciÃ³n: fecha y usuario

---

## ğŸ–¼ï¸ MEDIA LIBRARY

### **Modal de Biblioteca de Medios**

**ActivaciÃ³n:**
- Desde campo "Imagen Destacada"
- Click en "Seleccionar desde GalerÃ­a"
- Abre modal fullscreen

**CaracterÃ­sticas:**

```tsx
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BIBLIOTECA DE MEDIOS                          [X Cerrar]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  ğŸ” Buscar imÃ¡genes... [input]      [ğŸ“¤ Subir ImÃ¡genes]   â”‚
â”‚                                                            â”‚
â”‚  [Grid / Lista]  ğŸ“ Filtros: Todas | Recientes | Destacadasâ”‚
â”‚                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ IMG â”‚  â”‚ IMG â”‚  â”‚ IMG â”‚  â”‚ IMG â”‚  â”‚ IMG â”‚  â”‚ IMG â”‚   â”‚
â”‚  â”‚ 1   â”‚  â”‚ 2   â”‚  â”‚ 3   â”‚  â”‚ 4   â”‚  â”‚ 5   â”‚  â”‚ 6   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ IMG â”‚  â”‚ IMG â”‚  â”‚ IMG â”‚  â”‚ IMG â”‚  â”‚ IMG â”‚  â”‚ IMG â”‚   â”‚
â”‚  â”‚ 7   â”‚  â”‚ 8   â”‚  â”‚ 9   â”‚  â”‚ 10  â”‚  â”‚ 11  â”‚  â”‚ 12  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Imagen Seleccionada: perro-cachorro.jpg (245 KB)         â”‚
â”‚                                                            â”‚
â”‚  [Cancelar]  [Insertar Imagen]                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Funcionalidades:**

1. **Vista Grid/Lista**
   - Grid: 6 columnas, imÃ¡genes cuadradas
   - Lista: 1 columna, info detallada

2. **BÃºsqueda**
   - Buscar por nombre de archivo
   - Filtrado instantÃ¡neo

3. **Upload MÃºltiple**
   - Drag & drop
   - SelecciÃ³n mÃºltiple
   - Progress bar por imagen
   - ValidaciÃ³n: solo imÃ¡genes, max 5MB

4. **GestiÃ³n**
   - Click en imagen â†’ Seleccionar
   - Hover: botÃ³n "Eliminar" (solo admins)
   - Info tooltip: nombre, tamaÃ±o, fecha

5. **InserciÃ³n**
   - BotÃ³n "Insertar Imagen" inserta URL en campo
   - Preview actualizado inmediatamente

### **Supabase Storage Setup**

**Bucket:** `blog-images`

**ConfiguraciÃ³n:**
```sql
-- Bucket settings
- Public: false
- File size limit: 5MB
- Allowed MIME types: image/jpeg, image/png, image/webp, image/gif
```

**RLS Policies:**
```sql
-- INSERT: Solo admins pueden subir
CREATE POLICY "Admins can upload blog images"
ON storage.objects FOR INSERT
TO authenticated
WITH CHECK (
  bucket_id = 'blog-images'
  AND auth.uid() IN (
    SELECT user_id FROM user_roles WHERE role = 'admin'
  )
);

-- SELECT: Todos pueden ver (para mostrar en blog pÃºblico)
CREATE POLICY "Public can view blog images"
ON storage.objects FOR SELECT
TO public
USING (bucket_id = 'blog-images');

-- DELETE: Solo admins pueden eliminar
CREATE POLICY "Admins can delete blog images"
ON storage.objects FOR DELETE
TO authenticated
USING (
  bucket_id = 'blog-images'
  AND auth.uid() IN (
    SELECT user_id FROM user_roles WHERE role = 'admin'
  )
);
```

**Setup Manual:**
1. Ir a Supabase Dashboard â†’ Storage
2. Crear bucket `blog-images` manualmente
3. Configurar: pÃºblico=false, lÃ­mite=5MB, tipos=imÃ¡genes
4. Ejecutar SQL: `supabase/blog_storage_SOLO_RLS.sql`

---

## ğŸ“Š BASE DE DATOS

### **Tabla: blog_posts**

```sql
CREATE TABLE blog_posts (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  title TEXT NOT NULL,
  slug TEXT UNIQUE NOT NULL,
  excerpt TEXT,
  content TEXT NOT NULL,
  featured_image_url TEXT,
  category_id UUID REFERENCES blog_categories(id),
  author_id UUID REFERENCES auth.users(id),
  status TEXT DEFAULT 'draft' CHECK (status IN ('draft', 'published')),
  is_featured BOOLEAN DEFAULT false,
  views_count INTEGER DEFAULT 0,
  reading_time_minutes INTEGER DEFAULT 5,
  meta_description TEXT,
  meta_keywords TEXT[],
  published_at TIMESTAMP WITH TIME ZONE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_blog_posts_slug ON blog_posts(slug);
CREATE INDEX idx_blog_posts_status ON blog_posts(status);
CREATE INDEX idx_blog_posts_category ON blog_posts(category_id);
CREATE INDEX idx_blog_posts_featured ON blog_posts(is_featured);
```

### **Tabla: blog_categories**

```sql
CREATE TABLE blog_categories (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  name TEXT UNIQUE NOT NULL,
  slug TEXT UNIQUE NOT NULL,
  color TEXT DEFAULT '#4A7C59',
  description TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- CategorÃ­as por defecto
INSERT INTO blog_categories (name, slug, color) VALUES
  ('EducaciÃ³n Canina', 'educacion-canina', '#4A7C59'),
  ('Salud y Bienestar', 'salud-bienestar', '#2563EB'),
  ('NutriciÃ³n', 'nutricion', '#D97706'),
  ('Comportamiento', 'comportamiento', '#DC2626'),
  ('Razas', 'razas', '#7C3AED');
```

### **Tabla: blog_post_views**

```sql
CREATE TABLE blog_post_views (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  post_id UUID REFERENCES blog_posts(id) ON DELETE CASCADE,
  viewer_ip TEXT,
  user_agent TEXT,
  viewed_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_views_post_id ON blog_post_views(post_id);
```

### **RLS Policies**

```sql
-- SELECT: Todos pueden ver posts publicados
CREATE POLICY "Public can view published posts"
ON blog_posts FOR SELECT
TO public
USING (status = 'published');

-- SELECT: Admins pueden ver todos
CREATE POLICY "Admins can view all posts"
ON blog_posts FOR SELECT
TO authenticated
USING (
  auth.uid() IN (
    SELECT user_id FROM user_roles WHERE role = 'admin'
  )
);

-- INSERT/UPDATE/DELETE: Solo admins
CREATE POLICY "Admins can manage posts"
ON blog_posts FOR ALL
TO authenticated
USING (
  auth.uid() IN (
    SELECT user_id FROM user_roles WHERE role = 'admin'
  )
);
```

---

## ğŸš€ FUNCIONALIDADES CLAVE

### âœ… Frontend (PÃ¡gina PÃºblica)

- [x] Layout profesional 2 columnas
- [x] Sidebar sticky con widgets
- [x] BÃºsqueda en tiempo real
- [x] Filtros por categorÃ­a
- [x] Contador de posts por categorÃ­a
- [x] Top 5 artÃ­culos populares (por vistas)
- [x] ArtÃ­culo destacado principal
- [x] Cards horizontales con imÃ¡genes
- [x] Hover effects elegantes
- [x] Metadata completa (fecha, tiempo, vistas)
- [x] Responsive 100%
- [x] CTA a cursos
- [x] Iconos descriptivos (Lucide)

### âœ… Backend (Panel Admin)

- [x] PÃ¡ginas dedicadas crear/editar
- [x] Editor TinyMCE completo
- [x] Media Library integrada
- [x] Supabase Storage (`blog-images`)
- [x] Upload mÃºltiple de imÃ¡genes
- [x] BÃºsqueda de imÃ¡genes
- [x] GestiÃ³n de categorÃ­as
- [x] Control publicaciÃ³n (draft/published)
- [x] ArtÃ­culos destacados
- [x] SEO: slug, excerpt, meta
- [x] Preview antes de publicar
- [x] Auto-generaciÃ³n de slug
- [x] ValidaciÃ³n de campos
- [x] Toast notifications
- [x] RLS policies configuradas

---

## ğŸ“ˆ MÃ‰TRICAS Y SEGUIMIENTO

### **Contador de Vistas**

**ImplementaciÃ³n:**
```tsx
// Incrementar vista al cargar artÃ­culo
useEffect(() => {
  incrementPostView(postId)
}, [postId])
```

**FunciÃ³n:**
```typescript
export async function incrementPostView(postId: string) {
  const { error: viewError } = await supabase
    .from('blog_post_views')
    .insert({
      post_id: postId,
      viewer_ip: await getClientIP(),
      user_agent: navigator.userAgent
    })

  if (!viewError) {
    await supabase.rpc('increment_post_views', { post_id: postId })
  }
}
```

### **Tiempo de Lectura**

**CÃ¡lculo automÃ¡tico:**
```typescript
function calculateReadingTime(content: string): number {
  const wordsPerMinute = 200
  const wordCount = content.split(/\s+/).length
  return Math.ceil(wordCount / wordsPerMinute)
}
```

---

## ğŸ¨ ESTILOS Y DISEÃ‘O

### **Paleta de Colores**

```css
/* Principales */
--forest: #4A7C59       /* Primary, hover links */
--sage: #8FBC8F         /* Gradientes */
--gray-50: #F9FAFB      /* Fondos sidebar */
--gray-100: #F3F4F6     /* Hover states */
--gray-900: #111827     /* TÃ­tulos */

/* CategorÃ­as (ejemplos) */
--educacion: #4A7C59
--salud: #2563EB
--nutricion: #D97706
--comportamiento: #DC2626
--razas: #7C3AED
```

### **Componentes Clave**

**Card de ArtÃ­culo:**
```css
.article-card {
  background: white;
  border-radius: 12px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  border: 1px solid #F3F4F6;
  transition: all 0.3s ease;
}

.article-card:hover {
  box-shadow: 0 10px 15px rgba(0,0,0,0.1);
  transform: translateY(-2px);
}
```

**Sidebar Sticky:**
```css
.sidebar {
  position: sticky;
  top: 96px; /* top-24 = 6rem = 96px */
}
```

---

## ğŸ”„ FLUJO DE TRABAJO

### **Crear un ArtÃ­culo**

1. Admin accede a `/administrator/blog`
2. Click en "Crear Nuevo ArtÃ­culo"
3. Rellenar formulario:
   - TÃ­tulo (genera slug automÃ¡ticamente)
   - Seleccionar categorÃ­a
   - Escribir excerpt
   - Click "Seleccionar desde GalerÃ­a" â†’ Media Library
   - Seleccionar imagen destacada
   - Escribir contenido en TinyMCE
   - Configurar opciones (destacado, publicar)
4. Click "Publicar ArtÃ­culo" o "Guardar Borrador"
5. Toast de confirmaciÃ³n
6. Redirect a lista de artÃ­culos

### **Editar un ArtÃ­culo**

1. Admin accede a `/administrator/blog`
2. Click en "Editar" en fila del artÃ­culo
3. Formulario pre-rellenado con datos existentes
4. Modificar campos necesarios
5. Click "Actualizar ArtÃ­culo"
6. Toast de confirmaciÃ³n
7. Redirect a lista

### **Subir ImÃ¡genes**

1. Desde crear/editar artÃ­culo
2. Click "Seleccionar desde GalerÃ­a"
3. Modal Media Library se abre
4. Click "Subir ImÃ¡genes"
5. Drag & drop o seleccionar archivos
6. Progress bar por cada imagen
7. ImÃ¡genes aparecen en galerÃ­a
8. Seleccionar una
9. Click "Insertar Imagen"
10. Preview actualizado

---

## ğŸ› DEBUGGING Y LOGS

### **Console Logs Ãštiles**

```typescript
// Carga de artÃ­culos
console.log('ğŸ“° Loading blog posts...')
console.log('âœ… Loaded', posts.length, 'posts')

// BÃºsqueda
console.log('ğŸ” Searching for:', searchQuery)
console.log('ğŸ“Š Found', results.length, 'results')

// Filtro por categorÃ­a
console.log('ğŸ·ï¸ Filtering by category:', categoryId)

// Upload de imagen
console.log('ğŸ“¤ Uploading:', file.name)
console.log('âœ… Uploaded to:', publicURL)
```

---

## ğŸ“ PRÃ“XIMAS MEJORAS (Opcionales)

### Fase 2
- [ ] Comentarios en artÃ­culos
- [ ] Reacciones (like, love, etc.)
- [ ] Compartir en redes (auto-post)
- [ ] Newsletter subscription
- [ ] Posts relacionados automÃ¡ticos (IA)
- [ ] Editor Markdown (alternativa a TinyMCE)
- [ ] Programar publicaciÃ³n futura
- [ ] Co-autores mÃºltiples
- [ ] Revisiones y versionado
- [ ] Analytics integrado (tiempo en pÃ¡gina, scroll depth)

### Fase 3
- [ ] Multi-idioma (i18n)
- [ ] Podcast integrado (audio artÃ­culos)
- [ ] Serie de artÃ­culos
- [ ] ArtÃ­culos premium (solo usuarios registrados)
- [ ] GeneraciÃ³n automÃ¡tica de imÃ¡genes (DALL-E)
- [ ] Resumen con IA
- [ ] Audio narrado con IA (TTS)

---

## ğŸ‰ ESTADO ACTUAL

### âœ… **100% COMPLETADO**

- âœ… DiseÃ±o frontend profesional
- âœ… Layout 2 columnas responsive
- âœ… Sidebar sticky con 4 widgets
- âœ… Sistema completo de gestiÃ³n admin
- âœ… PÃ¡ginas dedicadas crear/editar
- âœ… Media Library funcional
- âœ… Supabase Storage configurado
- âœ… Upload mÃºltiple de imÃ¡genes
- âœ… RLS policies completas
- âœ… Base de datos optimizada
- âœ… BÃºsqueda en tiempo real
- âœ… Filtros por categorÃ­a
- âœ… Top artÃ­culos populares
- âœ… Contador de vistas
- âœ… SEO optimizado
- âœ… Responsive 100%

---

## ğŸ“ SOPORTE

**DocumentaciÃ³n relacionada:**
- `README.md` - DocumentaciÃ³n principal
- `supabase/blog_storage_SOLO_RLS.sql` - RLS policies
- `supabase/INSTRUCCIONES_BUCKET_BLOG.md` - Setup storage

**Archivos clave:**
- `app/blog/page.tsx` - PÃ¡gina principal
- `app/administrator/blog/` - GestiÃ³n admin
- `components/admin/MediaLibrary.tsx` - Biblioteca medios
- `lib/supabase/blog.ts` - API del blog

---

**VersiÃ³n**: 2.1.0  
**Estado**: âœ… COMPLETADO Y DESPLEGADO  
**Ãšltima actualizaciÃ³n**: Enero 2026

---

# ğŸ“° Â¡Blog profesional listo para publicar contenido de calidad! ğŸš€
